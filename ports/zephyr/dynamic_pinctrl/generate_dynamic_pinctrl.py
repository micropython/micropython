import argparse
import re

parser = argparse.ArgumentParser(
    prog="generate_dynamic_pinctrl", description="convert preprocessed define list to table"
)

parser.add_argument("filename_out", type=argparse.FileType("wt"))
parser.add_argument("names", nargs=argparse.REMAINDER)
args = parser.parse_args()

args.filename_out.write("/* Generated by generate_dynamic_pinctrl.py\n * Do not Edit\n */\n")
args.filename_out.write("static const char *generated_dynamic_pinctrl_names[] = {\n")
for name in args.names:
    name_clean = re.sub(r"[\s\\]", "", name)
    args.filename_out.write('  "{}",\n'.format(str(name_clean)))
args.filename_out.write("};\n")

args.filename_out.write("static const uint32_t generated_dynamic_pinctrl_pinmux[] = {\n")
for name in args.names:
    name_clean = re.sub(r"[\s\\]", "", name)
    args.filename_out.write("  {},\n".format(str(name_clean)))
args.filename_out.write("};\n")
